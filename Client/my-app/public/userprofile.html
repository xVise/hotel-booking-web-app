<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Profile</title>
    <link rel="stylesheet" href="userstyle.css" />
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>

<header class="header">
    <nav class="nav">
        <a href="index.html" class="nav_logo">ComfortCountry</a>
    </nav>
</header>

<div class="container">
    <h1>User Profile</h1>
    <form id="profileForm">
        <label id="first_name" >Name:</label>
        <label id="surname">Surname:</label>
        <label id="phoneNumber">Phone Number:</label>
        <label id="sex">Sex:</label>
        <label id="dob">Date of Birth:</label>
        <label id="country">Country:</label>
        <label id="email">Email:</label>
    </form>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
const token = urlParams.get('token');
console.log(token);

if (token) {
    axios.get('api/user/users', {
        headers: {
            Authorization: 'Bearer ' + token
        }
    }).then(function (response) {
        const userInfo = response.data;
        console.log(userInfo);
        document.getElementById('first_name').innerText = "First Name: " + userInfo.First_Name;
        document.getElementById('surname').innerText = "Last Name: " + userInfo.Last_Name;
        document.getElementById('phoneNumber').innerText = "Phone number: " + userInfo.Phone_Number;
        document.getElementById('sex').innerText = "Sex: " + userInfo.Gender;
        document.getElementById('dob').innerText = "Date of Birthday: " + userInfo.Date;
        document.getElementById('country').innerText = "Country: " + userInfo.Country;
        document.getElementById('email').innerText = "Email: " + userInfo.EMail;
    }).catch(function (error) {
        console.error('Error fetching user profile:', error);
    });
} else {
    console.error('Token not found in URL.');
}
;
    
</script>

</body>
